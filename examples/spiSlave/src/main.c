/**
 ****************************************************************************************
 *
 * @file main.c
 *
 * @brief 应用程序主入口
 *
 ****************************************************************************************
 */

#include "b6x.h"
#include "drvs.h"
#include "dbg.h"


/*
 * DEFINES
 ****************************************************************************************
 */



/*
 * FUNCTIONS
 ****************************************************************************************
 */

/**
 ****************************************************************************************
 * @brief 系统初始化
 ****************************************************************************************
 */
static void sysInit(void)
{
    // 如有需要，在此进行配置
    
}

/**
 ****************************************************************************************
 * @brief 设备初始化
 ****************************************************************************************
 */
static void devInit(void)
{
    iwdt_disable();  // 禁用独立看门狗
    
    // 初始化调试功能
    dbgInit();
}

extern void spisTest(void);  // 声明SPI从设备测试函数

/**
 ****************************************************************************************
 * @brief 主函数 - 程序入口
 * @return int 程序退出码
 ****************************************************************************************
 */
int main(void)
{
    sysInit();      // 系统初始化
    
    devInit();      // 设备初始化

    spisTest();     // 执行SPI从设备测试
}
